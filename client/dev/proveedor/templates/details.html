<div class="submenu-container">
  <div class="row">
    <div class="col-md-12">
      <h1 class="submenu-title">Proveedores > Detalles proveedor / material</h1>
    </div>
  </div>
  <br><br>
  <div class="row">
    <div class="col-md-8 col-md-offset-2">
      <div *ngIf="proveedor">
        <form class="proveedor-form" [ngFormModel]="proveedorForm">
          <div class="form-group">
            <label for="nombre">Nombre:</label>
            <input [(ngModel)]="proveedor.nombre" class="form-control" id="nombre"/>
          </div>
          <div class="form-group">
            <label for="direccion">Dirección:</label>
            <input [(ngModel)]="proveedor.direccion" class="form-control" id="direccion"/>
          </div>
          <div class="form-group">
            <label for="ciudad">Ciudad:</label>
            <input [(ngModel)]="proveedor.ciudad" class="form-control" id="ciudad"/>
          </div>
          <div class="form-group">
            <label for="pais">País:</label>
            <input [(ngModel)]="proveedor.pais" class="form-control" id="pais"/>
          </div>
          <div class="form-group">
            <label for="telefono">Teléfono: </label>
            <input [(ngModel)]="proveedor.telefono" class="form-control" id="telefono"/>
          </div>
          <div class="form-group">
            <label for="valoracion">Valoración:</label>
            <input [(ngModel)]="proveedor.valoracion" class="form-control" id="valoracion"/>
          </div>
    
        <div *ngIf="mat.length>0">
              <h5><i class="fa fa-list"></i>Materiales:</h5>
              <table>
                <tr>
                  <td>
                    <div *ngFor="#p of mat; #i=index;">
                        
                      Pieza: {{p.pieza}} &nbsp; Refexterna: {{p.refexterna}} &nbsp; Coste: {{p.coste1}} &nbsp;
                      <a  (click)="editarmat(i,p.pieza,p.refexterna,p.coste1.p,coste2,p.val);a=true;">Editar&nbsp;<i class="fa fa-search"></i></a> &nbsp;
                      <a  (click)="minus(i);">Eliminar&nbsp;<i class="fa fa-trash-o "></i></a>
                    </div>  
                  </td>
                </tr>
              </table>
          </div>

          
          <a (click)="a=true;" class="btn btn-formulario"><i class="fa fa-plus" aria-hidden="true"></i> Añadir material</a>
           <div *ngIf="a==true;">       

           <div class="form-group">
            <label for="pieza">Pieza:</label>
            <input type="text" class="form-control" id="pieza" 
                ngControl="pieza"
                [class.formulario-error]="!proveedorForm.valid"
                autofocus />
          </div>
          <div class="form-group">
            <label for="refexterna">Referencia externa:</label>
            <input type="text" class="form-control" id="refexterna" 
                ngControl="refexterna"
                [class.formulario-error]="!proveedorForm.valid"
                autofocus />
          </div>
          <div class="form-group">
            <label for="coste1">Coste:</label>
            <input type="text" class="form-control" id="coste1" 
                ngControl="coste1"
                [class.formulario-error]="!proveedorForm.valid"
                autofocus />
          </div>
          <div class="form-group">
            <label for="coste2">Otro tipo de coste:</label>
            <input type="text" class="form-control" id="coste2" 
                ngControl="coste2"
                [class.formulario-error]="!proveedorForm.valid"
                autofocus />
          </div>
          <div class="form-group">
            <label for="val">Valoración de la pieza:</label>
            <input type="text" class="form-control" id="val" 
                ngControl="val"
                [class.formulario-error]="!proveedorForm.valid"
                autofocus />
          </div> 
          <a (click)="plus(proveedorForm);a=false;" class="btn btn-formulario"><i class="fa fa-check" aria-hidden="true"></i> Guardar material</a>
          <a (click)="backedit();a=false;" class="btn btn-formulario"><i class="fa fa-times" aria-hidden="true"></i> Cancelar material</a>
            </div>
          </form>
      </div>
      <p>
        <button (click)="gotoIndex()" class="btn btn-formulario pull-right margen-izda"><i class="fa fa-angle-left" aria-hidden="true"></i> Volver</button>
        <button (click)="edit(proveedor)" class="btn btn-formulario pull-right margen-izda"><i class="fa fa-floppy-o" aria-hidden="true"></i> Guardar proveedor</button>
        <button (click)="delete(proveedor)" class="btn btn-formulario pull-right"><i class="fa fa-times" aria-hidden="true"></i> Eliminar proveedor</button>
      </p>
    </div>
  </div>
</div>
